//
// Architecture-specific code for the memory manager.
//

#INCLUDE "../Mmp.hjk"

#SECTION "INITtext"
FN MmpInitializeArchitecture ()

    // Unmap the lower half mappings made by the Loader so that we catch illegal
    // accesses to them.

    RtlFillMemoryWithUlong (
        CAST MMP_DIRECTORY_BASE TO ^VOID, // ptr
        2048, // sz
        0, // ulong
    )

    // Flush TLB.

    KeuSweepTb ( FALSE )
END